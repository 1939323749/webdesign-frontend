<!DOCTYPE html>

<head>
    <!-- Import style -->
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css" />
    <!-- Import Vue 3 -->
    <script src="https://unpkg.com/vue@3"></script>
    <!-- Import component library -->
    <script src="https://unpkg.com/element-plus"></script>
    <script src="https://cdn.tailwindcss.com"></script>



</head>

<body>
    <header class="flex justify-between items-center bg-blue-600 p-4 fixed top-0 right-0 left-0">
        <div id="logo" class="logo">
            <el-icon>
                <CoffeeCup />
            </el-icon>
        </div>
        <div class="flex items-center space-x-4">
            <div class="search">
                <input type="text" placeholder="搜索..." class="bg-gray-200 px-4 py-2 rounded-l-lg">
                <button class="bg-blue-500 text-white px-4 py-2 rounded-r-lg hover:bg-blue-600">搜索</button>
            </div>
            <div class="post">
                <button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 shadow-lg">投稿</button>
            </div>
        </div>
    </header>

    <div class="flex">
        <nav class="bg-blue-500 text-white p-4 fixed top-16 left-0 bottom-0 w-48 rounded-r-lg">

            <div class="bg-sky-300 rounded-lg shadow-lg">
                <ul class=" list-none m-0 p-0">
                    <li class="my-2 "><a href="#"
                            class="block py-2 px-4 rounded-lg hover:bg-blue-600 hover:drop-shadow-lg">分类1</a></li>
                    <li class="my-2 "><a href="#"
                            class="block py-2 px-4 rounded-lg hover:bg-blue-600 hover:shadow-lg">分类2</a></li>
                    <li class="my-2 "><a href="#"
                            class="block py-2 px-4 rounded-lg hover:bg-blue-600 hover:shadow-lg">分类3</a></li>
                    <li class="my-2 "><a href="#"
                            class="block py-2 px-4 rounded-lg hover:bg-blue-600 hover:shadow-lg">分类4</a></li>
                </ul>
            </div>
        </nav>
        <main id="app" class="bg-gray-200 fixed top-16 bottom-0 left-32 right-0">
            
            <div v-for="(group, index) in groupedCovers" :key="`group-${index}`"
                class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-4">

                <div v-if="!loaded" v-for="cover in group" :key="cover.id" class="w-40 h-20 mr-4 bg-red-200 rounded-lg">
                </div>

                <div v-else v-for="cover in group" :key="`cover-${cover.id}`"
                    class="w-40 h-20 mr-4 bg-red-200 rounded-lg">
                    <div class="mx-2 my-2 w-36 h-18 bg-sky-300 rounded-lg">
                        <img :src="cover.url" alt="视频封面">
                    </div>
                </div>

            </div>

            <div v-if="index < groupedCovers.length - 1" class="separator">
                <!-- 在这里添加你的分隔块内容 -->
            </div>

        </main>




        <script>
            const test = Vue.createApp({
                methods: {
                    onclick() {
                        alert('test');
                    }
                }
            })
            test.mount('#test')

            const app = Vue.createApp({
                data() {
                    return {
                        loaded: false, // 是否加载完成的标志位
                        covers: [], // 存储视频封面的数据
                        groupedCovers: [],
                        rowIndex: 1,
                    };
                },
                watch: {
                    covers(newCovers) {
                        this.groupedCovers = this.groupCovers(newCovers);
                    },
                },
                computed: {
                    shownCovers() {
                        return this.covers.slice(0, this.rowIndex * 4);
                    }
                },
                methods: {
                    groupCovers(covers) {
                        let grouped = {};
                        covers.forEach((cover) => {
                            if (!(cover.category in grouped)) {
                                grouped[cover.category] = [];
                            }
                            grouped[cover.category].push(cover);
                        });
                        return Object.values(grouped);
                    },
                    loadNextRow() {
                        if (this.rowIndex * 4 < this.covers.length) {
                            this.rowIndex++;
                        }
                    },
                    onScroll() {
                        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                        const windowHeight = window.innerHeight;
                        const documentHeight = document.documentElement.scrollHeight;

                        if (scrollTop + windowHeight >= documentHeight - 10) {
                            this.loadNextRow();
                        }
                    }
                },
                mounted() {
                    setTimeout(() => {
                        // 在这里获取视频封面的数据，例如从服务器获取
                        // 假设获取到的数据是这样的：

                        this.covers = [
                            { id: 1, url: 'cover1.jpg', category: 'A' },
                            { id: 2, url: 'cover2.jpg', category: 'A' },
                            { id: 3, url: 'cover3.jpg', category: 'B' },
                            { id: 4, url: 'cover1.jpg', category: 'A' },
                            { id: 5, url: 'cover2.jpg', category: 'A' },
                            { id: 6, url: 'cover3.jpg', category: 'B' },
                            { id: 7, url: 'cover1.jpg', category: 'A' },
                            { id: 8, url: 'cover2.jpg', category: 'A' },
                            { id: 9, url: 'cover3.jpg', category: 'B' },
                            { id: 10, url: 'cover1.jpg', category: 'A' },
                            { id: 11, url: 'cover2.jpg', category: 'A' },
                            { id: 12, url: 'cover3.jpg', category: 'B' },
                            { id: 13, url: 'cover1.jpg', category: 'A' },
                            { id: 14, url: 'cover2.jpg', category: 'A' },
                            { id: 15, url: 'cover3.jpg', category: 'B' },
                            // ...
                        ];
            this.loaded = true;
            this.groupedCovers = this.groupCovers(this.covers);
                    }, 2000);
            window.addEventListener('scroll', this.onScroll);
                },
            unmounted() {
                window.removeEventListener('scroll', this.onScroll);
            },




            })
            app.use(ElementPlus)
            app.mount('#app');
        </script>

        <style>
            @media (min-width: 768px) {

                main {
                    margin-left: 56px;
                    /* 导航栏的宽度 */
                }
            }

            @media (max-width: 767px) {


                main {
                    margin: 0 auto;
                    /* 居中 */
                }
            }

            #main.center {
                display: flex;
                justify-content: center;
            }


            ul li:hover {
                transform: scale(1.01);
                transition: transform 0.2s ease-in-out;
            }
        </style>
</body>